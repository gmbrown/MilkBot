{"mappings":"MAAA,MAAMA,EAAsB,CAC1BC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHC,EAAG,IAGE,SAASC,EAAgBC,GAC9B,MAAMC,EAAQD,EACXE,MAAM,KACNC,QAAQC,GAAkB,KAATA,IACjBC,KAAKC,IACJ,MAAMC,EAAOD,EAAW,GAClBE,EAAOF,EAAW,GAExB,IAAIG,EAAUhB,EAAoBc,IAASG,SAASH,GAIpD,OAFAE,GAAW,EAEJ,C,KACLD,E,KACAD,E,QACAE,E,WACAH,MAIN,OADAL,EAAMU,MAAK,CAACC,EAAGC,IAAMA,EAAEJ,QAAUG,EAAEH,UAC5BR,EC5BF,MAAMa,EAAQ,CACnBC,UAAW,YACXC,KAAM,OACNC,SAAU,WACVC,gBAAiB,kBACjBC,SAAU,WACVC,MAAO,QACPC,WAAY,aACZC,eAAgB,iBAChBC,eAAgB,kBAeLC,EAAkB,CAC7B1B,EAAG,GACHD,EAAG,GACHD,EAAG,GACHD,EAAG,EACHD,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,GCnCE,SAAS+B,EAAcC,GAC5B,OAAOC,EAA4BD,EAAgB,GAAG,GAGjD,SAASC,EACdC,EACAC,EACAC,GAAW,GAENA,IACHF,EAAWA,EAASjB,MAAK,CAACC,EAAGC,IAAMA,EAAEJ,QAAUG,EAAEH,WAEnD,MAAMsB,EAAcH,EAASvB,KAAK2B,GAAMA,EAAEzB,OACpC0B,EAAqB,IAAIC,IAAIH,GAC7BI,EAAeF,EAAmBG,SACxC,IAAIC,EAAeF,EAAaG,OAAOC,MACnCC,EAAeH,EACfI,EAAc,EAClB,IAAK,MAAMlC,KAAQ4B,EAAc,CAC/B,GAAIX,EAAgBa,GAAgBb,EAAgBjB,IAAU,GAE5D,GADAkC,IACIA,IAAgBZ,EAClB,OAAOW,OAGTA,EAAejC,EACfkC,EAAc,EAEhBJ,EAAe9B,EAGjB,GACE0B,EAAmBS,IAAI,MACvBb,EAAe,IAAMY,GACJ,MAAjBJ,EAEA,OAAOG,EAIJ,SAASG,EAAYC,EAAWC,GACrC,MAAMC,EAAc,IAAIC,IAClBC,EAAc,IAAID,IAClBnB,EAAWgB,EAAUK,OAAOJ,GAClCjB,EAASjB,MAAK,CAACC,EAAGC,IAAMA,EAAEJ,QAAUG,EAAEH,UACtCmB,EAASsB,SAAS9C,IAChB0C,EAAYK,IAAI/C,EAAKG,MAAOuC,EAAYM,IAAIhD,EAAKG,OAAS,GAAK,GAC/DyC,EAAYG,IAAI/C,EAAKI,MAAOwC,EAAYI,IAAIhD,EAAKI,OAAS,GAAK,MAGjE,IAaI6C,EACAC,EAdAC,EAAsB,CAAEC,MAAO,GAC/BC,EAA4B,CAAED,MAAO,GAsBzC,GArBAV,EAAYI,SAAQ,CAACM,EAAOjD,KAEtBiD,EAAQD,EAAoBC,OAC9BC,EAA4BF,EAC5BA,EAAsB,C,KAAEhD,E,MAAMiD,IACrBA,EAAQC,EAA0BD,QAC3CC,EAA4B,C,KAAElD,E,MAAMiD,OAOxCR,EAAYE,SAAQ,CAACM,EAAOhD,KAC1B,GAAIgD,GAAS,EAAG,CACd,MAAME,EAAc9B,EAASzB,QAAQC,GAASA,EAAKI,OAASA,IAC5D6C,EAAaK,EAAYrD,KAAKD,GAASA,EAAKG,OAAMoD,MAAM,EAAG,GAC3DL,EAAuB7B,EAAciC,OAIrCJ,EACF,MAAO,CACLM,KAAM9C,EAAMS,eACZsC,UAAW,CAACP,GACZQ,QAAS,IAKb,GAAkC,IAA9BP,EAAoBC,MAAa,CACnC,MAAMO,EAAkBR,EAAoBhD,KACtCyD,EAAwBpC,EAASzB,QACpCC,GAASA,EAAKG,MAAQwD,IAGzB,MAAO,CACLH,KAAM9C,EAAMQ,eACZuC,UAAW,CAACE,GACZD,QAASG,EAAaD,EAAuB,IAKjD,GAAkC,IAA9BT,EAAoBC,OAAeC,EAA0BD,OAAS,EAAG,CAC3E,MAAMU,EAAWX,EAAoBhD,KAC/B4D,EAAWV,EAA0BlD,KAE3C,MAAO,CACLqD,KAAM9C,EAAMO,WACZwC,UAAW,CAACK,EAAUC,GACtBL,QAAS,IAKb,GAAIT,EACF,MAAO,CACLO,KAAM9C,EAAMM,MACZyC,UAAWR,EACXS,QAAS,IAKb,MAAMM,EAAoB3C,EAAcG,GACxC,GAAIwC,EACF,MAAO,CACLR,KAAM9C,EAAMK,SACZ0C,UAAW,CAACO,GACZN,QAAS,IAKb,GAAkC,IAA9BP,EAAoBC,MAAa,CACnC,MAAMU,EAAWX,EAAoBhD,KACrC,IAAI8D,EAAkBzC,EAASzB,QAAQC,GAASA,EAAKG,MAAQ2D,IAE7D,MAAO,CACLN,KAAM9C,EAAMI,gBACZ2C,UAAW,CAACK,GACZJ,QAASG,EAAaI,EAAiB,IAK3C,GACgC,IAA9Bd,EAAoBC,OACgB,IAApCC,EAA0BD,MAC1B,CACA,MAAMc,EAAY,CAChBf,EAAoBhD,KACpBkD,EAA0BlD,MAG5B,IAAIgE,EAAkB3C,EAASzB,QAC5BC,IAAUkE,EAAUE,SAASpE,EAAKG,QAGrC,MAAO,CACLqD,KAAM9C,EAAMG,SACZ4C,UAAWS,EACXR,QAASG,EAAaM,EAAiB,IAK3C,GAAkC,IAA9BhB,EAAoBC,MAAa,CACnC,MAAMW,EAAWZ,EAAoBhD,KACrC,IAAIkE,EAAiB7C,EAASzB,QAAQC,GAASA,EAAKG,MAAQ4D,IAE5D,MAAO,CACLP,KAAM9C,EAAME,KACZ6C,UAAW,CAACM,GACZL,QAASG,EAAaQ,EAAgB,IAI1C,MAAO,CACLb,KAAM9C,EAAMC,UACZ8C,UAAW,GACXC,QAASG,EAAarC,EAAU,IAK7B,SAASqC,EAAahE,EAAOyE,GAClC,OAAOzE,EAAMI,KAAKD,GAASA,EAAKG,OAAMoD,MAAM,EAAGe,GClLjD,IAAIC,GAAmB,EAEvB,MAAMC,EAEOC,KAAKC,UAAY,IAFxBF,EAGC,MAGDG,EAA+B,CAGnCC,GAAI,CAACJ,EAAQA,GACb,GAAI,CAACA,EAAQA,GACbK,GAAI,CAACL,EAAQA,GACbM,GAAI,CAACN,EAAQA,GACbO,GAAI,CAACP,EAAQA,GACbQ,GAAI,CAACR,EAAQA,GACb,GAAI,CAAC,GAAI,GACT,GAAI,CAAC,GAAI,GACTS,GAAI,CAACT,EAAQA,GACbU,GAAI,CAAC,GAAI,GACTC,GAAI,CAAC,GAAI,GACTC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,IAGJC,EAAqC,CACzCpB,GAAI,CAACT,EAAQA,GACbU,GAAI,CAACV,EAAQA,GACbW,GAAI,CAAC,GAAI,GACTE,GAAI,CAAC,GAAI,GACTC,GAAI,CAAC,GAAI,GACTC,GAAI,CAAC,EAAG,GACRe,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRnB,GAAI,CAAC,EAAG,GACRoB,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRlB,GAAI,CAAC,GAAI,GACTC,GAAI,CAAC,GAAI,GACTC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRgB,GAAI,CAAC,EAAG,GACRf,GAAI,CAAC,GAAI,GACTC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,GAAI,GACTC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACRQ,GAAI,CAAC,EAAG,GACRC,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,GACR,GAAI,CAAC,EAAG,IAoCV,SAASC,IAC4B,IAA/BrC,KAAKsC,cAAcC,QACrBC,IAEAxC,KAAKsC,cAAcG,eAIvB,SAASD,IACPxC,KAAKsC,cAAcI,qBAwCrB,SAASC,EAAwBC,EAAYC,GAC3C,MAAMC,EACJ9C,KAAKsC,cAAcS,WAAa/C,KAAKsC,cAAcU,cAvCvD,SAAuBC,EAAaC,GAElC,MAAMC,EAAanD,KAAKsC,cAAcU,aAChCI,EAAgBD,EAAanD,KAAKsC,cAAcC,QAAU,IAC1DO,EAAiBK,EAAanD,KAAKsC,cAAcS,WACjDM,EAASrD,KAAKsC,cAAcgB,iBAAiBC,OAC/CvD,KAAKsC,cAAcgB,iBAAiB,QACpCE,EAIJ,GAHAC,QAAQC,KACN,mBAAmBR,eAA0BG,qBAA0BJ,wBAAkCG,OAEvGpD,KAAKsC,cAAcqB,YAAc3D,KAAKsC,cAAcsB,eAClDP,GAAUH,EASZ,OARAO,QAAQI,IACNX,IAAiBJ,EACb,gBACA,cAAcI,MAEpBlD,KAAKsC,cAAcwB,uBAAuBZ,GAC1ClD,KAAKsC,cAAcyB,aAAarG,MAAQwF,OACxClD,KAAKsC,cAAc0B,oBAKnBhE,KAAKsC,cAAc2B,QAAUnB,GAAkBI,GACjDO,QAAQI,IAAI,4CACZ7D,KAAKsC,cAAc2B,OAAOC,WACjBlE,KAAKsC,cAAc6B,aAAef,GAAiBH,GAC5DQ,QAAQI,IAAI,uCACZrB,MAEAiB,QAAQI,IAAI,qBACZxB,KAWF+B,CAHExB,IAAe7C,EAAS+C,EAAiBF,EAAa7C,EAEtD8C,IAAgB9C,EAAS+C,EAAiBD,EAAc9C,GAyjB5D,SAASsE,EAAsBtH,GAC7B,OAAOuH,EAAYvH,IAAaD,EAA4BC,EAAU,GAIxE,SAASuH,EAAYvH,GACnB,MAAMoB,EAAc,GAMpB,OALApB,EAASsB,SAAS9C,IAChB,MAAMgJ,EAAmBpG,EAAY5C,EAAKI,OAAS,EACnDwC,EAAY5C,EAAKI,MAAQ4I,EAAmB,KAGvCC,OAAOjH,OAAOY,GAAasG,MAAM9F,GACrB,IAAVA,ICzvBX+F,aD2FOC,iBACL,IACG3E,KAAKsC,gBACLtC,KAAK4E,QAAQ5E,KAAK6E,oBAAoBzJ,MAAM0J,SAG7C,aAEI,IAAIC,SAASC,GAAYC,WAAWD,EAAS,OACnD,MAAME,EAAYlF,KAAK4E,QAAQ5E,KAAK6E,oBAAoBzJ,MAAM0J,SACxD9G,EAAagC,KAAKmF,MAAML,SACxBM,EAAmBpH,EACrB,wBAAwBA,KACxB,IACJyF,QAAQI,IAAI,qBAAqBqB,IAAYE,KA8E/C,SAAkBC,EAAYC,GAC5B,GAA0B,oBAAtBtF,KAAKuF,aAKP,OAJA9B,QAAQI,IACN,6EAA6E7D,KAAKuF,sBAEpFlD,IAGF,KAlFF,WAEIrC,KAAKwF,oBAAoBC,oBACxBzF,KAAKwF,oBAAoBE,YAAYC,cAEtC3F,KAAKwF,oBAAoBE,YAAYE,UAGrC5F,KAAKwF,oBAAoBK,iBACxB7F,KAAKwF,oBAAoBM,SAASH,cAEnC3F,KAAKwF,oBAAoBM,SAASF,UAwElCG,GACA,MAAOC,IAIW,KAAhBV,EAON,SAAiBnK,GACf,MAAO8K,EAAOC,GAAShL,EAAgBC,GACjCgL,EAAkBF,EAAMvK,KAAOwK,EAAMxK,KAE3C,GAAIuK,EAAMtK,OAASuK,EAAMvK,KAAM,CAC7B,MAAMyK,EACJxE,EAAmCuE,GACrC,GAAIC,EAAsB,CACxB3C,QAAQI,IACN,wEAEF,MAAOjB,EAAYC,GAAeuD,EAElC,YADAzD,EAAwBC,EAAYC,IAKxC,MAAMwD,EAAiBnG,EAA6BiG,GACpD,IAAKE,EACH,OAAIC,KAAKC,SAAW,KAElB9C,QAAQI,IACN,0FAEFlB,EAAwB,EAAG,KAI7Bc,QAAQI,IAAI,6BACZxB,KAIF,MAAOO,EAAYC,GAAewD,EAClC1D,EAAwBC,EAAYC,GAxClC2D,CAAQnB,GA2CZ,SACElK,EACAsL,EACAC,EACAC,GAEA,IAAIvL,EAAQF,EAAgBC,GACxB6C,EAAa9C,EAAgBuL,GAEjC,MAAMG,EAAS9I,EAAY1C,EAAO4C,GAAYe,KACxC8H,EA0dR,SAA0B3B,EAAWlH,GACnC,MAAM8I,EAAWhJ,EAAYoH,EAAWlH,GAAYe,KAC9CgI,EAAcjJ,EAAY,GAAIE,GAAYe,KAChD,GAAI+H,IAAaC,EACf,MAAO,GAET,MAAOC,EAAWC,GAAc/B,EAAU1J,KACvC0L,GAAapJ,EAAY,CAACoJ,GAAWlJ,GAAYe,OAEpD,OAAIiI,IAAcF,GAAYG,IAAeH,EAEpC5B,EAAU,GAAGiC,QAAUjC,EAAU,GAAGiC,QACvC,CAACjC,EAAU,IACX,CAACA,EAAU,IACN4B,IAAaE,EACf,CAAC9B,EAAU,IACT4B,IAAaG,EACf,CAAC/B,EAAU,IAEXA,EA7eakC,CAAiBhM,EAAO4C,GAExCqJ,EAAa,GAEfT,IAAW3K,EAAMS,gBAAkBmK,EAActD,OAAS,GAC5D8D,EAAWC,KAAK,CACdC,QAAS,kBACTC,OAAQzH,EACR0H,QAAS,EAAIzJ,EAAWuF,SAIxBqD,IAAW3K,EAAMQ,gBAAkBoK,EAActD,OAAS,GAC5D8D,EAAWC,KAAK,CACdC,QAAS,iBACTC,OAAQzH,EACR0H,QAAS,EAAIzJ,EAAWuF,SAKxBqD,IAAW3K,EAAMO,YAAcqK,EAActD,OAAS,IAClC,IAAlBsD,EACE/I,EAAY,GAAIE,GAAYe,OAAS9C,EAAMI,gBACzC2B,EAAW0J,OAAOvK,GAAMA,EAAEvB,QAAUR,EAAM,GAAGQ,UAC/CyL,EAAWC,KAAK,CACdC,QACE,6DACFC,OAAQzH,EACR0H,QAAS,EAAIzJ,EAAWuF,SAG1B8D,EAAWC,KAAK,CACdC,QACE,wEACFC,OAAQ,GACRC,QAAS,IAIbJ,EAAWC,KAAK,CACdC,QAAS,4CACTC,OAAQzH,EACR0H,QAAS,EAAIzJ,EAAWuF,SAGnBzF,EAAY,GAAIE,GAAYe,OAAS9C,EAAMI,gBACpDgL,EAAWC,KAAK,CACdC,QAAS,uDACTC,OAAQ,EACRC,QAAS,IAGXJ,EAAWC,KAAK,CACdC,QAAS,sDACTC,OAAQzH,EACR0H,QAAS,KAMf,GAAIb,IAAW3K,EAAMM,MACnB,GAA6B,IAAzBsK,EAActD,OAChB8D,EAAWC,KAAK,CACdC,QAAS,kCACTC,OAAQzH,EACR0H,QAAS,SAEN,GAA6B,IAAzBZ,EAActD,OACnB,CAAC,IAAK,KAAK5D,SAASkH,EAAc,GAAGnL,OACvC2L,EAAWC,KAAK,CACdC,QAAS,mCACTC,OAAQzH,EACR0H,QAAS,IAIbJ,EAAWC,KAAK,CACdC,QAAS,uCACTC,OAAQ,EACRC,QAAS,QAEN,CAGqBrM,EAAMqJ,MAC7BlJ,GACC,CAAC,IAAK,KAAKoE,SAASpE,EAAKG,OAASH,EAAKI,OAASqC,EAAW,GAAGrC,OAIhE0L,EAAWC,KAAK,CACdC,QAAS,mCACTC,OAAQzH,EACR0H,QAAS,IAGPnB,KAAKC,SAAW,GAClBc,EAAWC,KAAK,CACdC,QACE,4DACFC,OAAQ,EACRC,QAAS1H,IAIXsH,EAAWC,KAAK,CACdC,QAAS,qBACTC,OAAQ,EACRC,QAAS,IAQfb,IAAW3K,EAAMK,WACU,IAAzBuK,EAActD,OACZe,EAAYtG,GACdqJ,EAAWC,KAAK,CACdC,QACE,8DACFC,OAAQ,EACRC,QAAS,IAGXJ,EAAWC,KAAK,CACdC,QAAS,yCACTC,OAAQzH,EACR0H,QAAS,IAGqB,IAAzBZ,EAActD,OACnBe,EAAYtG,GACdqJ,EAAWC,KAAK,CACdC,QAAS,0DACTC,OAAQ,EACRC,QAAS,IAGXJ,EAAWC,KAAK,CACdC,QAAS,kCACTC,OAAQ,GACRC,QAAS,KAKbE,wBAA0BrB,KAAKsB,OAAO5J,EAAWxC,KAAK2B,GAAMA,EAAEgK,WAC1D/L,EAAMqJ,MAAMtH,GAAMA,EAAEgK,UAAYQ,wBAA0B,IAExDrD,EAAYtG,GACdqJ,EAAWC,KAAK,CACdC,QACE,gEACFC,OAAQ,EACRC,QAAS,IAGXJ,EAAWC,KAAK,CACdC,QAAS,uDACTC,OAAQzH,EACR0H,QAAS,IAKbJ,EAAWC,KAAK,CACdC,QAAS,wBACTC,OAAQ,EACRC,QAAS,MAObb,GAAU3K,EAAMI,iBAAmBwK,EAActD,QAAU,IACzDc,EAAsBrG,GACxBqJ,EAAWC,KAAK,CACdC,QACE,yEACFC,OAAQ,EACRC,QAAS,IAEgB,IAAlBZ,EACTQ,EAAWC,KAAK,CACdC,QAAS,uCACTC,OAAQzH,EACR0H,QAAS,EAAIzJ,EAAWuF,SAG1B8D,EAAWC,KAAK,CACdC,QAAS,0BACTC,OAAQ,GACRC,QAAS,EAAIzJ,EAAWuF,UAM1BqD,GAAU3K,EAAMG,UAAoC,GAAxByK,EAActD,SACxCc,EAAsBrG,GACxBqJ,EAAWC,KAAK,CACdC,QACE,sEACFC,OAAQ,EACRC,QAAS,IAGPrM,EAAM,GAAGM,OAASN,EAAM,GAAGM,KACzBsC,EAAW0J,OAAOvK,GAAMA,EAAEvB,QAAUR,EAAM,GAAGQ,UAC/CyL,EAAWC,KAAK,CACdC,QAAS,6CACTC,OAAQ,GACRC,QAAS,IAGXJ,EAAWC,KAAK,CACdC,QAAS,mDACTC,OAAQ,EACRC,QAAS,IAIbJ,EAAWC,KAAK,CACdC,QAAS,iCACTC,OAAQ,GACRC,QAAS,EAAIzJ,EAAWuF,UAQ9B,CAACsE,MAAM1L,KAAMF,EAAMG,UAAUuD,SAASiH,IACd,GAAxBC,EAActD,SAEVc,EAAsBrG,GACxBqJ,EAAWC,KAAK,CACdC,QAAS,6CACTC,OAAQ,EACRC,QAAS,KAGXK,2BAA6B9J,EAC1BxC,KAAK2B,GAAMA,EAAEvB,UACbE,MAAK,CAACC,EAAGC,IAAMA,EAAID,IAClB8K,EAAc,GAAGjL,UAAYkM,2BAA2B,GAChC,IAAtB9J,EAAWuF,OACS,IAAlBmD,EACFW,EAAWC,KAAK,CACdC,QAAS,yCACTC,OAAQ,GACRC,QAAS,IAGXJ,EAAWC,KAAK,CACdC,QAAS,WACTC,OAAQ,GACRC,QAAS,IAGkB,IAAtBzJ,EAAWuF,OACE,IAAlBmD,EACFW,EAAWC,KAAK,CACdC,QAAS,yCACTC,OAAQ,GACRC,QAAS,KAGXJ,EAAWC,KAAK,CACdC,QAAS,WACTC,OAAQ,GACRC,QAAS,IAIS,IAAlBf,EACFW,EAAWC,KAAK,CACdC,QAAS,yCACTC,OAAQ,GACRC,QAAS,KAGXJ,EAAWC,KAAK,CACdC,QAAS,WACTC,OAAQ,GACRC,QAAS,IAINZ,EAAc,GAAGjL,UAAYkM,2BAA2B,KACvC,IAAtB9J,EAAWuF,OACb8D,EAAWC,KAAK,CACdC,QAAS,cACTC,OAAQ,EACRC,QAAS,IAGXJ,EAAWC,KAAK,CACdC,QAAS,cACTC,OAAQ,EACRC,QAAS,KAIfJ,EAAWC,KAAK,CACdC,QAAS,WACTC,OAAQ,EACRC,QAAS,MAMXb,IAAW3K,EAAME,MAA0B,IAAlB0K,IACvBxC,EAAsBrG,GACxBqJ,EAAWC,KAAK,CACdC,QAAS,oDACTC,OAAQ,EACRC,QAAS,IAGPzJ,EAAW0J,OAAOvK,GAAMA,EAAEvB,QAAUR,EAAM,GAAGQ,UAC/CyL,EAAWC,KAAK,CACdC,QAAS,uBACTC,OAAQzH,EACR0H,QAAS,IAEFrM,EAAM,GAAGQ,QAAU,GAAsB,GAAjB8K,GACjCW,EAAWC,KAAK,CACdC,QACE,oEACFC,OAAQ,GACRC,QAAS,MAiLnB,SAAsB1J,EAAWC,GAC/B,MAAMG,EAAc,GAOpB,OANiBJ,EAAUK,OAAOJ,GACzBK,SAAS9C,IAChB,MAAMgJ,EAAmBpG,EAAY5C,EAAKI,OAAS,EACnDwC,EAAY5C,EAAKI,MAAQ4I,EAAmB,KAGvCC,OAAOuD,QAAQ5J,GAAasG,MAAK,EAAE9I,EAAMgD,KAC7B,IAAVA,GAAeZ,EAAU2J,OAAOvK,GAAMA,EAAExB,OAASA,OAnLtDqM,CAAa5M,EAAO4C,KACI,IAAtBA,EAAWuF,QAAkC,IAAlBmD,GAAuBJ,KAAKC,OAAS,GAClEc,EAAWC,KAAK,CACdC,QACE,wHACFC,OAAQ,GACRC,QAAS1H,IAEoB,IAAtB/B,EAAWuF,QACpB8D,EAAWC,KAAK,CACdC,QAAS,mCACTC,OAAQ,GACRC,QAAS,KAOb3K,EAA4B1B,EAAMgD,OAAOJ,GAAa,KACrDlB,EAA4BkB,EAAY,KAEf,IAAtBA,EAAWuF,QAAkC,IAAlBmD,EACzBJ,KAAKC,OAAS,GAChBc,EAAWC,KAAK,CACdC,QAAS,uDACTC,OAAQ,GACRC,QAAS1H,IAGXsH,EAAWC,KAAK,CACdC,QAAS,sDACTC,OAAQ,GACRC,QAAS,KAGkB,IAAtBzJ,EAAWuF,QACpB8D,EAAWC,KAAK,CACdC,QAAS,sDACTC,OAAQ,GACRC,QAAS,MAKf,GAA0B,IAAtBJ,EAAW9D,QAAkC,IAAlBmD,EAU7B,OATIJ,KAAKC,SAAW,KAClBc,EAAWC,KAAK,CACdC,QAAS,qDACTC,OAAQ,EACRC,QAAS1H,IAGb0D,QAAQI,IAAI,kEACZxB,IAIF4F,cAAgB,EAChBC,eAAiB,EACjBzE,QAAQI,IAAI,8CACZwD,EAAWhJ,SAAS8J,IAClB1E,QAAQI,IACN,WACEsE,EAAUX,OACV,cACAW,EAAUV,QACV,KACAU,EAAUZ,SAEVU,gBAAkBlI,GAAUoI,EAAUX,SAAWzH,EACnDkI,cAAgBlI,EAEhBkI,cAAgB3B,KAAKsB,IAAIK,cAAeE,EAAUX,QAEhDU,iBAAmBnI,GAAUoI,EAAUC,UAAYrI,EACrDmI,eAAiBnI,EAEjBmI,eAAiB5B,KAAKsB,IAAIM,eAAgBC,EAAUV,YAIxDhE,QAAQI,IACN,iBAAmBoE,cAAgB,iBAAmBC,gBAExDvF,EAAwBsF,cAAeC,gBAjerCG,CAAShD,EAAYC,EAAatF,KAAKsI,mBA9FzCC,CAASrD,EAAWlH,KC1GU,MAChCwK,OAAOC,GAAG,kBD6qBH,WACL,MAAMC,EAAO1I,KAAK6E,mBAEhB7E,KAAKsI,kBAAoB,GACzBtI,KAAK4E,QAAQ8D,GAAMC,gBAClB3I,KAAK4E,QAAQ8D,GAAME,YAEpBnF,QAAQI,IAAI,0BACZJ,QAAQI,IAAI,yBAA0B7D,KAAKsI,mBAC3CxI,EAAmB0E,OAAOuD,QAAQ/H,KAAK4E,SAASH,MAC9C,EAAEoE,EAAGC,KACHA,EAAOH,gBACNG,EAAOF,WACS,IAAjBE,EAAOC,OACPF,IAAMH,EAAO,KAEjBjF,QAAQI,IAAI,mBAAoB/D,OC5rBpC0I,OAAOC,GAAG,oBDgsBH,SAA+BO,GACpC,MAAMN,EAAO1I,KAAK6E,mBAEhB/E,GACAkJ,EAAQC,QAAQP,IACwB,IAAxClE,OAAO0E,KAAKF,EAAQC,SAAS1F,SAI7BE,QAAQI,IAAI,2CACZ2E,OAAOW,KAAK,QAAS,CACnBC,MAAO,GACPC,GAAIrJ,KAAKsJ,SACTC,SAAUvJ,KAAKuJ,YAGnBzJ,GAAmB,M","sources":["util.js","constants.js","handUtils.js","playhand.js","index.js"],"sourcesContent":["const nonNumericRankToNum = {\n  T: 10,\n  J: 11,\n  Q: 12,\n  K: 13,\n  A: 14,\n};\n\nexport function cardStringToObj(cardsString) {\n  const cards = cardsString\n    .split('?')\n    .filter((card) => card !== '')\n    .map((cardString) => {\n      const rank = cardString[0];\n      const suit = cardString[1];\n\n      let ranknum = nonNumericRankToNum[rank] || parseInt(rank);\n      // Rank number should go 0 - 12\n      ranknum -= 2;\n\n      return {\n        suit,\n        rank,\n        ranknum,\n        cardString,\n      };\n    });\n  cards.sort((a, b) => b.ranknum - a.ranknum);\n  return cards;\n}\n","export const HANDS = {\n  HIGH_CARD: 'HIGH CARD',\n  PAIR: 'PAIR',\n  TWO_PAIR: 'TWO PAIR',\n  THREE_OF_A_KIND: 'THREE OF A KIND',\n  STRAIGHT: 'STRAIGHT',\n  FLUSH: 'FLUSH',\n  FULL_HOUSE: 'FULL HOUSE',\n  FOUR_OF_A_KIND: 'FOUR OF A KIND',\n  STRAIGHT_FLUSH: 'STRAIGHT FLUSH',\n};\n\nexport const RANKED_HANDS = {\n  [HANDS.HIGH_CARD]: 1,\n  [HANDS.PAIR]: 2,\n  [HANDS.TWO_PAIR]: 3,\n  [HANDS.THREE_OF_A_KIND]: 4,\n  [HANDS.STRAIGHT]: 5,\n  [HANDS.FLUSH]: 6,\n  [HANDS.FULL_HOUSE]: 7,\n  [HANDS.FOUR_OF_A_KIND]: 8,\n  [HANDS.STRAIGHT_FLUSH]: 9,\n};\n\nexport const RANK_TO_NUMRANK = {\n  A: 12,\n  K: 11,\n  Q: 10,\n  J: 9,\n  T: 8,\n  9: 7,\n  8: 6,\n  7: 5,\n  6: 4,\n  5: 3,\n  4: 2,\n  3: 1,\n  2: 0,\n};\n\nexport const ALL_CARD_STRINGS = [\n  '2D',\n  '2C',\n  '2H',\n  '2S',\n  '3D',\n  '3C',\n  '3H',\n  '3S',\n  '4D',\n  '4C',\n  '4H',\n  '4S',\n  '5D',\n  '5C',\n  '5H',\n  '5S',\n  '6D',\n  '6C',\n  '6H',\n  '6S',\n  '7D',\n  '7C',\n  '7H',\n  '7S',\n  '8D',\n  '8C',\n  '8H',\n  '8S',\n  '9D',\n  '9C',\n  '9H',\n  '9S',\n  'TD',\n  'TC',\n  'TH',\n  'TS',\n  'JD',\n  'JC',\n  'JH',\n  'JS',\n  'QD',\n  'QC',\n  'QH',\n  'QS',\n  'KD',\n  'KC',\n  'KH',\n  'KS',\n  'AD',\n  'AC',\n  'AH',\n  'AS',\n];\n","import { HANDS, RANK_TO_NUMRANK } from './constants';\n\nexport function checkStraight(allCardsSorted) {\n  return checkStraightOrDrawOfLength(allCardsSorted, 5, true);\n}\n\nexport function checkStraightOrDrawOfLength(\n  allCards,\n  lengthOfDraw,\n  isSorted = false\n) {\n  if (!isSorted) {\n    allCards = allCards.sort((a, b) => b.ranknum - a.ranknum);\n  }\n  const sortedRanks = allCards.map((c) => c.rank);\n  const uniqueRanksInOrder = new Set(sortedRanks);\n  const rankIterator = uniqueRanksInOrder.values();\n  let previousRank = rankIterator.next().value;\n  let startingRank = previousRank;\n  let lengthSoFar = 1;\n  for (const rank of rankIterator) {\n    if (RANK_TO_NUMRANK[previousRank] - RANK_TO_NUMRANK[rank] === 1) {\n      lengthSoFar++;\n      if (lengthSoFar === lengthOfDraw) {\n        return startingRank;\n      }\n    } else {\n      startingRank = rank;\n      lengthSoFar = 1;\n    }\n    previousRank = rank;\n  }\n  // if there's an ace & we're one card away from a straight & the last rank we looked at was a 2, it's a straight\n  if (\n    uniqueRanksInOrder.has('A') &&\n    lengthOfDraw - 1 === lengthSoFar &&\n    previousRank === '2'\n  ) {\n    return startingRank;\n  }\n}\n\nexport function myPokerHand(handCards, boardCards) {\n  const rankToCount = new Map();\n  const suitToCount = new Map();\n  const allCards = handCards.concat(boardCards);\n  allCards.sort((a, b) => b.ranknum - a.ranknum);\n  allCards.forEach((card) => {\n    rankToCount.set(card.rank, (rankToCount.get(card.rank) || 0) + 1);\n    suitToCount.set(card.suit, (suitToCount.get(card.suit) || 0) + 1);\n  });\n\n  let highestRankAndCount = { count: 0 };\n  let secondHighestRankAndCount = { count: 0 };\n  rankToCount.forEach((count, rank) => {\n    // maps preserve insertion order, so we know higher ranks always come first\n    if (count > highestRankAndCount.count) {\n      secondHighestRankAndCount = highestRankAndCount;\n      highestRankAndCount = { rank, count };\n    } else if (count > secondHighestRankAndCount.count) {\n      secondHighestRankAndCount = { rank, count };\n    }\n  });\n\n  // Check straight flush\n  let flushRanks;\n  let straightFlushTopRank;\n  suitToCount.forEach((count, suit) => {\n    if (count >= 5) {\n      const cardsOfSuit = allCards.filter((card) => card.suit === suit);\n      flushRanks = cardsOfSuit.map((card) => card.rank).slice(0, 5);\n      straightFlushTopRank = checkStraight(cardsOfSuit);\n    }\n  });\n\n  if (straightFlushTopRank) {\n    return {\n      hand: HANDS.STRAIGHT_FLUSH,\n      handRanks: [straightFlushTopRank],\n      kickers: [],\n    };\n  }\n\n  // Check 4 of a kind\n  if (highestRankAndCount.count === 4) {\n    const fourOfAKindRank = highestRankAndCount.rank;\n    const cardsMinusFourOfAKind = allCards.filter(\n      (card) => card.rank != fourOfAKindRank\n    );\n\n    return {\n      hand: HANDS.FOUR_OF_A_KIND,\n      handRanks: [fourOfAKindRank],\n      kickers: getTopNRanks(cardsMinusFourOfAKind, 1),\n    };\n  }\n\n  // Check full house\n  if (highestRankAndCount.count === 3 && secondHighestRankAndCount.count >= 2) {\n    const tripRank = highestRankAndCount.rank;\n    const pairRank = secondHighestRankAndCount.rank;\n\n    return {\n      hand: HANDS.FULL_HOUSE,\n      handRanks: [tripRank, pairRank],\n      kickers: [],\n    };\n  }\n\n  // Check flush\n  if (flushRanks) {\n    return {\n      hand: HANDS.FLUSH,\n      handRanks: flushRanks,\n      kickers: [],\n    };\n  }\n\n  // Check straight\n  const topRankInStraight = checkStraight(allCards);\n  if (topRankInStraight) {\n    return {\n      hand: HANDS.STRAIGHT,\n      handRanks: [topRankInStraight],\n      kickers: [],\n    };\n  }\n\n  // Check 3 of a kind\n  if (highestRankAndCount.count === 3) {\n    const tripRank = highestRankAndCount.rank;\n    var cardsMinusTrips = allCards.filter((card) => card.rank != tripRank);\n\n    return {\n      hand: HANDS.THREE_OF_A_KIND,\n      handRanks: [tripRank],\n      kickers: getTopNRanks(cardsMinusTrips, 2),\n    };\n  }\n\n  // Check 2 pair\n  if (\n    highestRankAndCount.count === 2 &&\n    secondHighestRankAndCount.count === 2\n  ) {\n    const pairRanks = [\n      highestRankAndCount.rank,\n      secondHighestRankAndCount.rank,\n    ];\n\n    var cardsMinusPairs = allCards.filter(\n      (card) => !pairRanks.includes(card.rank)\n    );\n\n    return {\n      hand: HANDS.TWO_PAIR,\n      handRanks: pairRanks,\n      kickers: getTopNRanks(cardsMinusPairs, 1),\n    };\n  }\n\n  // Check pair\n  if (highestRankAndCount.count === 2) {\n    const pairRank = highestRankAndCount.rank;\n    var cardsMinusPair = allCards.filter((card) => card.rank != pairRank);\n\n    return {\n      hand: HANDS.PAIR,\n      handRanks: [pairRank],\n      kickers: getTopNRanks(cardsMinusPair, 3),\n    };\n  }\n\n  return {\n    hand: HANDS.HIGH_CARD,\n    handRanks: [],\n    kickers: getTopNRanks(allCards, 5),\n  };\n}\n\n// We're not sorting because we're assuming the cards are already sorted (beginning of myPokerHand)\nexport function getTopNRanks(cards, n) {\n  return cards.map((card) => card.rank).slice(0, n);\n}\n","import { cardStringToObj } from './util';\nimport { checkStraightOrDrawOfLength, myPokerHand } from './handUtils';\nimport { HANDS } from './constants';\n\nlet tauntOpportunity = false; // set to true if I'm in a showdown and someone else is all-in\n\nconst mb = {\n  // constants\n  BIG_BLIND: game.big_blind / 100, // not accounting for someone changing BB mid-game\n  ALL: 'all',\n};\n\nconst preFlopHandsToBetMultipliers = {\n  // hand_ranks: [call_to, raise_to]\n  // call_to and raise_to are multipliers of the big blind\n  AA: [mb.ALL, mb.ALL],\n  72: [mb.ALL, mb.ALL],\n  KK: [mb.ALL, mb.ALL],\n  QQ: [mb.ALL, mb.ALL],\n  JJ: [mb.ALL, mb.ALL],\n  TT: [mb.ALL, mb.ALL],\n  99: [10, 3],\n  88: [10, 3],\n  AK: [mb.ALL, mb.ALL],\n  AQ: [30, 3],\n  AJ: [30, 3],\n  A5: [3, 1],\n  AT: [8, 3],\n  A9: [1, 1],\n  A8: [1, 1],\n  KQ: [8, 3],\n  KJ: [8, 3],\n  KT: [3, 3],\n  K9: [1, 1],\n  QJ: [3, 1],\n  QT: [3, 1],\n  Q9: [1, 1],\n  Q8: [1, 1],\n  JT: [3, 1],\n  J9: [1, 1],\n  J8: [1, 1],\n  J7: [1, 1],\n  T9: [1, 1],\n  77: [3, 1],\n  66: [3, 1],\n  55: [3, 1],\n  44: [3, 1],\n  33: [3, 1],\n  22: [3, 1],\n};\n\nconst suitedPreFlopHandsToBetMultipliers = {\n  AK: [mb.ALL, mb.ALL],\n  AQ: [mb.ALL, mb.ALL],\n  AJ: [30, 5],\n  AT: [10, 5],\n  A9: [10, 3],\n  A8: [8, 3],\n  A7: [6, 1],\n  A6: [6, 1],\n  A5: [8, 3],\n  A4: [5, 1],\n  A3: [5, 1],\n  A2: [5, 1],\n  KQ: [10, 5],\n  KJ: [10, 5],\n  KT: [8, 3],\n  K9: [6, 3],\n  K8: [1, 3],\n  QJ: [10, 5],\n  QT: [8, 1],\n  Q9: [3, 1],\n  Q8: [3, 1],\n  JT: [10, 3],\n  J9: [3, 1],\n  J8: [3, 1],\n  J7: [3, 1],\n  T9: [6, 3],\n  T8: [1, 1],\n  T7: [1, 1],\n  98: [5, 1],\n  97: [1, 1],\n  87: [5, 1],\n  86: [1, 1],\n  76: [1, 1],\n  75: [1, 1],\n  65: [1, 1],\n  64: [1, 1],\n  54: [1, 1],\n  43: [1, 1],\n  32: [1, 1],\n};\n\nexport async function checkIfTurnAndPlay() {\n  if (\n    !game.action_widget ||\n    !game.players[game.client_perspective].cards.card_str\n  ) {\n    // seems like sometimes action_widget will be truthy but there are no cards... skip\n    return;\n  }\n  await new Promise((resolve) => setTimeout(resolve, 1000));\n  const holeCards = game.players[game.client_perspective].cards.card_str;\n  const boardCards = game.board.card_str;\n  const boardCardsLogMsg = boardCards\n    ? ` and the board shows ${boardCards}.`\n    : '.';\n  console.log(`My hole cards are ${holeCards}${boardCardsLogMsg}`);\n  playHand(holeCards, boardCards);\n}\n\nfunction setDefaultGameOptions() {\n  if (\n    game.game_options_widget.allow_easy_reveal &&\n    !game.game_options_widget.easy_reveal.is_checked()\n  ) {\n    game.game_options_widget.easy_reveal.clicked();\n  }\n  if (\n    game.game_options_widget.bomb_pot_value &&\n    !game.game_options_widget.bomb_pot.is_checked()\n  ) {\n    game.game_options_widget.bomb_pot.clicked();\n  }\n}\n\nfunction checkOrFold() {\n  if (game.action_widget.to_call === 0) {\n    checkOrCall();\n  } else {\n    game.action_widget.execute_fold();\n  }\n}\n\nfunction checkOrCall() {\n  game.action_widget.execute_check_call();\n}\n\nfunction makeBetOfSize(callToLimit, raiseToLimit) {\n  // TODO later on, take in increment size so we can do smaller raises\n  const betInFront = game.action_widget.bet_in_front;\n  const betSizeIfCall = betInFront + game.action_widget.to_call / 100;\n  const betSizeIfAllIn = betInFront + game.action_widget.stack_size;\n  const minBet = game.action_widget.threshold_values.length\n    ? game.action_widget.threshold_values[0]\n    : undefined;\n  console.info(\n    `Raise to limit: ${raiseToLimit}. Min bet: ${minBet}. Call to limit: ${callToLimit}. Bet size if call: ${betSizeIfCall}.`\n  );\n  if (game.action_widget.bet_button || game.action_widget.raise_button) {\n    if (minBet <= raiseToLimit) {\n      console.log(\n        raiseToLimit === betSizeIfAllIn\n          ? 'Going all in.'\n          : `Raising to ${raiseToLimit}.`\n      );\n      game.action_widget.update_slider_by_value(raiseToLimit);\n      game.action_widget.sizing_input.value = raiseToLimit;\n      game.action_widget.execute_bet_raise();\n      return;\n    }\n  }\n  // If we get here, either raising wasn't an option in the game or the min bet was too high for us.\n  if (game.action_widget.all_in && betSizeIfAllIn <= raiseToLimit) {\n    console.log(\"Can't/won't raise; going all in instead.\");\n    game.action_widget.all_in.execute();\n  } else if (game.action_widget.call_button && betSizeIfCall <= callToLimit) {\n    console.log(\"Can't/won't raise; calling instead.\");\n    checkOrCall();\n  } else {\n    console.log('Checking/folding.');\n    checkOrFold();\n  }\n}\n\nfunction makeBetUsingMultipliers(callToMult, raiseToMult) {\n  const betSizeIfAllIn =\n    game.action_widget.stack_size + game.action_widget.bet_in_front;\n  const callToLimit =\n    callToMult === mb.ALL ? betSizeIfAllIn : callToMult * mb.BIG_BLIND;\n  const raiseToLimit =\n    raiseToMult === mb.ALL ? betSizeIfAllIn : raiseToMult * mb.BIG_BLIND;\n  makeBetOfSize(callToLimit, raiseToLimit);\n}\n\nfunction playHand(handString, boardString) {\n  if (game.ruleset_name !== 'NL Texas Holdem') {\n    console.log(\n      `Folding/checking because we aren't playing 'NL Texas Holdem'. The game is ${game.ruleset_name}.`\n    );\n    checkOrFold();\n    return;\n  }\n  try {\n    setDefaultGameOptions();\n  } catch (e) {\n    // we don't really care\n  }\n\n  if (boardString === '') {\n    preflop(handString);\n  } else {\n    postflop(handString, boardString, game.n_players_in_hand);\n  }\n}\n\nfunction preflop(cardsString) {\n  const [card1, card2] = cardStringToObj(cardsString);\n  const handRanksString = card1.rank + card2.rank;\n\n  if (card1.suit === card2.suit) {\n    const suitedBetMultipliers =\n      suitedPreFlopHandsToBetMultipliers[handRanksString];\n    if (suitedBetMultipliers) {\n      console.log(\n        'Preflop cards are suited, and match one of the suited starting hands'\n      );\n      const [callToMult, raiseToMult] = suitedBetMultipliers;\n      makeBetUsingMultipliers(callToMult, raiseToMult);\n      return;\n    }\n  }\n\n  const betMultipliers = preFlopHandsToBetMultipliers[handRanksString];\n  if (!betMultipliers) {\n    if (Math.random() > 0.95) {\n      // 5% of the time we will randomly limp in\n      console.log(\n        \"Even though this isn't a hand we usually play, randomly limping in if it's cheap.\"\n      );\n      makeBetUsingMultipliers(3, 1);\n      return;\n    }\n\n    console.log('Checking or folding.');\n    checkOrFold();\n    return;\n  }\n\n  const [callToMult, raiseToMult] = betMultipliers;\n  makeBetUsingMultipliers(callToMult, raiseToMult);\n}\n\nfunction postflop(\n  cardsString,\n  boardCardsString,\n  playersInHand,\n  potSizeAtStartOfRound\n) {\n  var cards = cardStringToObj(cardsString);\n  var boardCards = cardStringToObj(boardCardsString);\n\n  const myhand = myPokerHand(cards, boardCards).hand;\n  const usedHoleCards = getHoleCardsUsed(cards, boardCards);\n\n  const betOptions = [];\n\n  if (myhand === HANDS.STRAIGHT_FLUSH && usedHoleCards.length > 0) {\n    betOptions.push({\n      message: 'Straight flush!',\n      callTo: mb.ALL,\n      raiseTo: 4 * boardCards.length,\n    });\n  }\n\n  if (myhand === HANDS.FOUR_OF_A_KIND && usedHoleCards.length > 0) {\n    betOptions.push({\n      message: 'Four of a kind',\n      callTo: mb.ALL,\n      raiseTo: 4 * boardCards.length,\n    });\n  }\n\n  // full houses\n  if (myhand === HANDS.FULL_HOUSE && usedHoleCards.length > 0) {\n    if (usedHoleCards === 2) {\n      if (myPokerHand([], boardCards).hand === HANDS.THREE_OF_A_KIND) {\n        if (boardCards.every((c) => c.ranknum < cards[0].ranknum)) {\n          betOptions.push({\n            message:\n              'Three of a kind on the board and we have a pocket overpair',\n            callTo: mb.ALL,\n            raiseTo: 4 * boardCards.length,\n          });\n        } else {\n          betOptions.push({\n            message:\n              'Three of a kind on the board and we have a pocket pair (not overpair)',\n            callTo: 10,\n            raiseTo: 3,\n          });\n        }\n      } else {\n        betOptions.push({\n          message: 'Full house using at least both hole cards',\n          callTo: mb.ALL,\n          raiseTo: 4 * boardCards.length,\n        });\n      }\n    } else if (myPokerHand([], boardCards).hand === HANDS.THREE_OF_A_KIND) {\n      betOptions.push({\n        message: 'Full house using 1 hole card, but trips on the board',\n        callTo: 5,\n        raiseTo: 5,\n      });\n    } else {\n      betOptions.push({\n        message: 'Full house using 1 hole card, no trips on the board',\n        callTo: mb.ALL,\n        raiseTo: 8,\n      });\n    }\n  }\n\n  // flushes\n  if (myhand === HANDS.FLUSH) {\n    if (usedHoleCards.length === 2) {\n      betOptions.push({\n        message: 'Flush using both our hole cards',\n        callTo: mb.ALL,\n        raiseTo: 7,\n      });\n    } else if (usedHoleCards.length === 1) {\n      if (['A', 'K'].includes(usedHoleCards[0].rank)) {\n        betOptions.push({\n          message: 'Flush using 1 hole card (A or K)',\n          callTo: mb.ALL,\n          raiseTo: 4,\n        });\n      }\n\n      betOptions.push({\n        message: 'Flush using 1 hole card (not A or K)',\n        callTo: 5,\n        raiseTo: 0,\n      });\n    } else {\n      // Flush on the board\n      // Check if we beat the board and have A or K\n      const hasHighCardInSuit = cards.some(\n        (card) =>\n          ['A', 'K'].includes(card.rank) && card.suit === boardCards[0].suit\n      );\n\n      if (hasHighCardInSuit) {\n        betOptions.push({\n          message: 'Flush using 1 hole card (A or K)',\n          callTo: mb.ALL,\n          raiseTo: 4,\n        });\n      } else {\n        if (Math.random() > 0.9) {\n          betOptions.push({\n            message:\n              'Flush on the board, but randomly bluffing 10% of the time',\n            callTo: 0,\n            raiseTo: mb.ALL,\n          });\n        } else {\n          // Right now this is just for logging\n          betOptions.push({\n            message: 'Flush on the board',\n            callTo: 0,\n            raiseTo: 0,\n          });\n        }\n      }\n    }\n  }\n\n  // straights\n  if (myhand === HANDS.STRAIGHT) {\n    if (usedHoleCards.length === 2) {\n      if (fourToFlush(boardCards)) {\n        betOptions.push({\n          message:\n            'Straight using both hole cards, but 4 to flush on the board',\n          callTo: 5,\n          raiseTo: 5,\n        });\n      } else {\n        betOptions.push({\n          message: 'Straight using both hole cards, wahoo!',\n          callTo: mb.ALL,\n          raiseTo: 7,\n        });\n      }\n    } else if (usedHoleCards.length === 1) {\n      if (fourToFlush(boardCards)) {\n        betOptions.push({\n          message: 'Straight using 1 hole card, but 4 to flush on the board',\n          callTo: 3,\n          raiseTo: 3,\n        });\n      } else {\n        betOptions.push({\n          message: 'Straight using only 1 hole card',\n          callTo: 20,\n          raiseTo: 3,\n        });\n      }\n    } else {\n      // Straight on the board\n      highestBoardCardRankNum = Math.max(...boardCards.map((c) => c.rankNum));\n      if (cards.some((c) => c.rankNum === highestBoardCardRankNum + 1)) {\n        // We beat the straight on the board\n        if (fourToFlush(boardCards)) {\n          betOptions.push({\n            message:\n              'We beat the straight on the board, but there are 4 to a flush',\n            callTo: 0,\n            raiseTo: 0,\n          });\n        } else {\n          betOptions.push({\n            message: 'Straight on the board, but we have a better straight',\n            callTo: mb.ALL,\n            raiseTo: 5,\n          });\n        }\n      } else {\n        // Right now this is just for logging\n        betOptions.push({\n          message: 'Straight on the board',\n          callTo: 0,\n          raiseTo: 0,\n        });\n      }\n    }\n  }\n\n  // trips (only using one card in hand)\n  if (myhand == HANDS.THREE_OF_A_KIND && usedHoleCards.length >= 1) {\n    if (fourToFlushOrStraight(boardCards)) {\n      betOptions.push({\n        message:\n          'Trips using at least 1 hole card, but 4 to flush/straight on the board',\n        callTo: 3,\n        raiseTo: 3,\n      });\n    } else if (usedHoleCards === 2) {\n      betOptions.push({\n        message: 'Pocket pair that hit trips or better',\n        callTo: mb.ALL,\n        raiseTo: 3 * boardCards.length,\n      });\n    } else {\n      betOptions.push({\n        message: 'Trips using 1 hole card',\n        callTo: 25,\n        raiseTo: 3 * boardCards.length,\n      });\n    }\n  }\n\n  // two pair (using both hole cards)\n  if (myhand == HANDS.TWO_PAIR && usedHoleCards.length == 2) {\n    if (fourToFlushOrStraight(boardCards)) {\n      betOptions.push({\n        message:\n          'Two pair using both hole cards but 4 to flush/straight on the board',\n        callTo: 3,\n        raiseTo: 3,\n      });\n    } else {\n      if (cards[0].rank === cards[1].rank) {\n        if (boardCards.every((c) => c.ranknum < cards[0].ranknum)) {\n          betOptions.push({\n            message: 'Pair on the board and pocket pair overpair',\n            callTo: 15,\n            raiseTo: 3,\n          });\n        } else {\n          betOptions.push({\n            message: 'Pair on the board and pocket pair (not overpair)',\n            callTo: 5,\n            raiseTo: 1,\n          });\n        }\n      } else {\n        betOptions.push({\n          message: 'Two pair using both hole cards',\n          callTo: 25,\n          raiseTo: 2 * boardCards.length,\n        });\n      }\n    }\n  }\n\n  // pair (possible 2 pair with one pair on the board)\n  if (\n    [AHNDS.PAIR, HANDS.TWO_PAIR].includes(myhand) &&\n    usedHoleCards.length == 1\n  ) {\n    if (fourToFlushOrStraight(boardCards)) {\n      betOptions.push({\n        message: 'Pair, but 4 to flush/straight on the board',\n        callTo: 3,\n        raiseTo: 3,\n      });\n    } else {\n      boardCardRankNumDescending = boardCards\n        .map((c) => c.ranknum)\n        .sort((a, b) => b - a);\n      if (usedHoleCards[0].ranknum === boardCardRankNumDescending[0]) {\n        if (boardCards.length === 3) {\n          if (playersInHand === 2) {\n            betOptions.push({\n              message: 'Top pair (only 1 other player in hand)',\n              callTo: 20,\n              raiseTo: 5,\n            });\n          } else {\n            betOptions.push({\n              message: 'Top pair',\n              callTo: 10,\n              raiseTo: 3,\n            });\n          }\n        } else if (boardCards.length === 4) {\n          if (playersInHand === 2) {\n            betOptions.push({\n              message: 'Top pair (only 1 other player in hand)',\n              callTo: 20,\n              raiseTo: 10,\n            });\n          } else {\n            betOptions.push({\n              message: 'Top pair',\n              callTo: 10,\n              raiseTo: 0,\n            });\n          }\n        } else {\n          if (playersInHand === 2) {\n            betOptions.push({\n              message: 'Top pair (only 1 other player in hand)',\n              callTo: 30,\n              raiseTo: 10,\n            });\n          } else {\n            betOptions.push({\n              message: 'Top pair',\n              callTo: 10,\n              raiseTo: 0,\n            });\n          }\n        }\n      } else if (usedHoleCards[0].ranknum === boardCardRankNumDescending[1]) {\n        if (boardCards.length === 3) {\n          betOptions.push({\n            message: 'Second pair',\n            callTo: 5,\n            raiseTo: 2,\n          });\n        } else {\n          betOptions.push({\n            message: 'Second pair',\n            callTo: 5,\n            raiseTo: 0,\n          });\n        }\n      }\n      betOptions.push({\n        message: 'low pair',\n        callTo: 3,\n        raiseTo: 0,\n      });\n    }\n  }\n\n  // pocket pairs\n  if (myhand === HANDS.PAIR && usedHoleCards === 2) {\n    if (fourToFlushOrStraight(boardCards)) {\n      betOptions.push({\n        message: 'Pocket pair, but 4 to flush/straight on the board',\n        callTo: 3,\n        raiseTo: 3,\n      });\n    } else {\n      if (boardCards.every((c) => c.ranknum < cards[0].ranknum)) {\n        betOptions.push({\n          message: 'Pocket pair overpair',\n          callTo: mb.ALL,\n          raiseTo: 5,\n        });\n      } else if (cards[0].ranknum > 9 && playersInHand == 2) {\n        betOptions.push({\n          message:\n            \"Pocket pair isn't top pair but it's high, and only 1 other player\",\n          callTo: 10,\n          raiseTo: 5,\n        });\n      }\n    }\n  }\n\n  // Flush Draw\n  if (hasFlushDraw(cards, boardCards)) {\n    if (boardCards.length === 3 && playersInHand === 2 && Math.random > 0.5) {\n      betOptions.push({\n        message:\n          'flush draw using both hole cards (3 cards on board), only 1 other player in hand, randomly going all in half the time',\n        callTo: 10,\n        raiseTo: mb.ALL,\n      });\n    } else if (boardCards.length !== 5) {\n      betOptions.push({\n        message: 'flush draw using both hole cards',\n        callTo: 10,\n        raiseTo: 0,\n      });\n    }\n  }\n\n  // Open ended straight draw\n  if (\n    checkStraightOrDrawOfLength(cards.concat(boardCards), 4) &&\n    !checkStraightOrDrawOfLength(boardCards, 4)\n  ) {\n    if (boardCards.length === 3 && playersInHand === 2) {\n      if (Math.random > 0.7) {\n        betOptions.push({\n          message: 'straight draw, randomly going all in 30% of the time',\n          callTo: 12,\n          raiseTo: mb.ALL,\n        });\n      } else {\n        betOptions.push({\n          message: 'open ended straight draw using at least 1 hole card',\n          callTo: 12,\n          raiseTo: 12,\n        });\n      }\n    } else if (boardCards.length !== 5) {\n      betOptions.push({\n        message: 'open ended straight draw using at least 1 hole card',\n        callTo: 10,\n        raiseTo: 10,\n      });\n    }\n  }\n\n  if (betOptions.length === 0 && playersInHand === 2) {\n    if (Math.random() > 0.97) {\n      betOptions.push({\n        message: 'Random bluff 3% of the time against 1 other player',\n        callTo: 0,\n        raiseTo: mb.ALL,\n      });\n    }\n    console.log('Nothing interesting going on with our hand. Check/folding');\n    checkOrFold();\n    return;\n  }\n\n  highestCallTo = 0;\n  highestRaiseTo = 0;\n  console.log('Considering betting based on these things:');\n  betOptions.forEach((betOption) => {\n    console.log(\n      'callTo: ' +\n        betOption.callTo +\n        ', raiseTo: ' +\n        betOption.raiseTo +\n        ', ' +\n        betOption.message\n    );\n    if (highestCallTo === mb.ALL || betOption.callTo === mb.ALL) {\n      highestCallTo = mb.ALL;\n    } else {\n      highestCallTo = Math.max(highestCallTo, betOption.callTo);\n    }\n    if (highestRaiseTo === mb.ALL || betOption.RaiseTo === mb.ALL) {\n      highestRaiseTo = mb.ALL;\n    } else {\n      highestRaiseTo = Math.max(highestRaiseTo, betOption.raiseTo);\n    }\n  });\n\n  console.log(\n    'Will call to: ' + highestCallTo + ' or raise to: ' + highestRaiseTo\n  );\n  makeBetUsingMultipliers(highestCallTo, highestRaiseTo);\n\n  return;\n}\n\nexport function handleShowdown() {\n  const seat = game.client_perspective;\n  if (\n    game.n_players_in_hand > 1 &&\n    game.players[seat].is_sitting_in &&\n    !game.players[seat].is_folded\n  ) {\n    console.log('SHOWDOWN WITH ME IN IT');\n    console.log('# players in showdown:', game.n_players_in_hand);\n    tauntOpportunity = Object.entries(game.players).some(\n      ([i, player]) =>\n        player.is_sitting_in &&\n        !player.is_folded &&\n        player.chips === 0 &&\n        i !== seat + ''\n    );\n    console.log('tauntOpportunity', tauntOpportunity);\n  }\n}\n\nexport function handlePotDistribution(potData) {\n  const seat = game.client_perspective;\n  if (\n    tauntOpportunity &&\n    potData.winners[seat] &&\n    Object.keys(potData.winners).length === 1\n  ) {\n    // TODO will taunt before animations finish. eventually, add a delay or wait for some event\n    // indicating animations are done\n    console.log('Taunting because I knocked someone out!');\n    socket.emit('taunt', {\n      taunt: 16,\n      id: game.table_id,\n      group_id: game.group_id,\n    });\n  }\n  tauntOpportunity = false;\n}\n\nfunction getHoleCardsUsed(holeCards, boardCards) {\n  const withBoth = myPokerHand(holeCards, boardCards).hand;\n  const noHoleCards = myPokerHand([], boardCards).hand;\n  if (withBoth === noHoleCards) {\n    return [];\n  }\n  const [withFirst, withSecond] = holeCards.map(\n    (holeCard) => myPokerHand([holeCard], boardCards).hand\n  );\n  if (withFirst === withBoth && withSecond === withBoth) {\n    // either card gets you just as good a hand as with both of them. return the one with higher rank\n    return holeCards[0].rankNum > holeCards[1].rankNum\n      ? [holeCards[0]]\n      : [holeCards[1]];\n  } else if (withBoth === withFirst) {\n    return [holeCards[0]];\n  } else if (withBoth === withSecond) {\n    return [holeCards[1]];\n  } else {\n    return holeCards;\n  }\n}\n\nfunction fourToFlushOrStraight(allCards) {\n  return fourToFlush(allCards) || checkStraightOrDrawOfLength(allCards, 4);\n}\n\n// Some duplicated work here that we could clean up\nfunction fourToFlush(allCards) {\n  const suitToCount = {};\n  allCards.forEach((card) => {\n    const currentSuitCount = suitToCount[card.suit] || 0;\n    suitToCount[card.suit] = currentSuitCount + 1;\n  });\n\n  return Object.values(suitToCount).some((count) => {\n    return count === 4;\n  });\n}\n\n// For now we are only considering flush draws that use both hole cards\nfunction hasFlushDraw(handCards, boardCards) {\n  const suitToCount = {};\n  const allCards = handCards.concat(boardCards);\n  allCards.forEach((card) => {\n    const currentSuitCount = suitToCount[card.suit] || 0;\n    suitToCount[card.suit] = currentSuitCount + 1;\n  });\n\n  return Object.entries(suitToCount).some(([suit, count]) => {\n    return count === 4 && handCards.every((c) => c.suit === suit);\n  });\n}\n","import {checkIfTurnAndPlay, handleShowdown, handlePotDistribution} from './playhand'\n\nsetInterval(checkIfTurnAndPlay, 2500)\nsocket.on('is in showdown', handleShowdown)\nsocket.on('distributing pot', handlePotDistribution)"],"names":["$0df1a61bc49d2233$var$nonNumericRankToNum","T","J","Q","K","A","$0df1a61bc49d2233$export$1c585bc21eb51405","cardsString","cards","split","filter","card","map","cardString","rank","suit","ranknum","parseInt","sort","a","b","$4bc93b426d7a2d10$export$c0e98576cfcf6795","HIGH_CARD","PAIR","TWO_PAIR","THREE_OF_A_KIND","STRAIGHT","FLUSH","FULL_HOUSE","FOUR_OF_A_KIND","STRAIGHT_FLUSH","$4bc93b426d7a2d10$export$25d516e80805b3c6","$4be18b68299772f5$export$ee7ce675b1c1a112","allCardsSorted","$4be18b68299772f5$export$50fb8bc86304c405","allCards","lengthOfDraw","isSorted","sortedRanks","c","uniqueRanksInOrder","Set","rankIterator","values","previousRank","next","value","startingRank","lengthSoFar","has","$4be18b68299772f5$export$d23da08cb65660ef","handCards","boardCards","rankToCount","Map","suitToCount","concat","forEach","set","get","flushRanks","straightFlushTopRank","highestRankAndCount","count","secondHighestRankAndCount","cardsOfSuit","slice","hand","handRanks","kickers","fourOfAKindRank","cardsMinusFourOfAKind","$4be18b68299772f5$export$737596005815f338","tripRank","pairRank","topRankInStraight","cardsMinusTrips","pairRanks","cardsMinusPairs","includes","cardsMinusPair","n","$f86c89a0cb56440a$var$tauntOpportunity","$f86c89a0cb56440a$var$mb","game","big_blind","$f86c89a0cb56440a$var$preFlopHandsToBetMultipliers","AA","KK","QQ","JJ","TT","AK","AQ","AJ","A5","AT","A9","A8","KQ","KJ","KT","K9","QJ","QT","Q9","Q8","JT","J9","J8","J7","T9","$f86c89a0cb56440a$var$suitedPreFlopHandsToBetMultipliers","A7","A6","A4","A3","A2","K8","T8","T7","$f86c89a0cb56440a$var$checkOrFold","action_widget","to_call","$f86c89a0cb56440a$var$checkOrCall","execute_fold","execute_check_call","$f86c89a0cb56440a$var$makeBetUsingMultipliers","callToMult","raiseToMult","betSizeIfAllIn","stack_size","bet_in_front","callToLimit","raiseToLimit","betInFront","betSizeIfCall","minBet","threshold_values","length","undefined","console","info","bet_button","raise_button","log","update_slider_by_value","sizing_input","execute_bet_raise","all_in","execute","call_button","$f86c89a0cb56440a$var$makeBetOfSize","$f86c89a0cb56440a$var$fourToFlushOrStraight","$f86c89a0cb56440a$var$fourToFlush","currentSuitCount","Object","some","setInterval","async","players","client_perspective","card_str","Promise","resolve","setTimeout","holeCards","board","boardCardsLogMsg","handString","boardString","ruleset_name","game_options_widget","allow_easy_reveal","easy_reveal","is_checked","clicked","bomb_pot_value","bomb_pot","$f86c89a0cb56440a$var$setDefaultGameOptions","e","card1","card2","handRanksString","suitedBetMultipliers","betMultipliers","Math","random","$f86c89a0cb56440a$var$preflop","boardCardsString","playersInHand","potSizeAtStartOfRound","myhand","usedHoleCards","withBoth","noHoleCards","withFirst","withSecond","holeCard","rankNum","$f86c89a0cb56440a$var$getHoleCardsUsed","betOptions","push","message","callTo","raiseTo","every","highestBoardCardRankNum","max","AHNDS","boardCardRankNumDescending","entries","$f86c89a0cb56440a$var$hasFlushDraw","highestCallTo","highestRaiseTo","betOption","RaiseTo","$f86c89a0cb56440a$var$postflop","n_players_in_hand","$f86c89a0cb56440a$var$playHand","socket","on","seat","is_sitting_in","is_folded","i","player","chips","potData","winners","keys","emit","taunt","id","table_id","group_id"],"version":3,"file":"index.js.map"}