(()=>{const e={T:10,J:11,Q:12,K:13,A:14};function a(a){const o=a.split("?").filter((e=>""!==e)).map((a=>{const o=a[0],s=a[1];let n=e[o]||parseInt(o);return n-=2,{suit:s,rank:o,ranknum:n,cardString:a}}));return o.sort(((e,a)=>a.ranknum-e.ranknum)),o}const o={HIGH_CARD:"HIGH CARD",PAIR:"PAIR",TWO_PAIR:"TWO PAIR",THREE_OF_A_KIND:"THREE OF A KIND",STRAIGHT:"STRAIGHT",FLUSH:"FLUSH",FULL_HOUSE:"FULL HOUSE",FOUR_OF_A_KIND:"FOUR OF A KIND",STRAIGHT_FLUSH:"STRAIGHT FLUSH"},s={A:12,K:11,Q:10,J:9,T:8,9:7,8:6,7:5,6:4,5:3,4:2,3:1,2:0};function n(e){return t(e,5,!0)}function t(e,a,o=!1){o||(e=e.sort(((e,a)=>a.ranknum-e.ranknum)));const n=e.map((e=>e.rank)),t=new Set(n),i=t.values();let r=i.next().value,l=r,h=1;for(const e of i){if(s[r]-s[e]==1){if(h++,h===a)return l}else l=e,h=1;r=e}if(t.has("A")&&a-1===h&&"2"===r)return l}function i(e,a){const s=new Map,t=new Map,i=e.concat(a);i.sort(((e,a)=>a.ranknum-e.ranknum)),i.forEach((e=>{s.set(e.rank,(s.get(e.rank)||0)+1),t.set(e.suit,(t.get(e.suit)||0)+1)}));let l,h,c={count:0},g={count:0};if(s.forEach(((e,a)=>{e>c.count?(g=c,c={rank:a,count:e}):e>g.count&&(g={rank:a,count:e})})),t.forEach(((e,a)=>{if(e>=5){const e=i.filter((e=>e.suit===a));l=e.map((e=>e.rank)).slice(0,5),h=n(e)}})),h)return{hand:o.STRAIGHT_FLUSH,handRanks:[h],kickers:[]};if(4===c.count){const e=c.rank,a=i.filter((a=>a.rank!=e));return{hand:o.FOUR_OF_A_KIND,handRanks:[e],kickers:r(a,1)}}if(3===c.count&&g.count>=2){const e=c.rank,a=g.rank;return{hand:o.FULL_HOUSE,handRanks:[e,a],kickers:[]}}if(l)return{hand:o.FLUSH,handRanks:l,kickers:[]};const u=n(i);if(u)return{hand:o.STRAIGHT,handRanks:[u],kickers:[]};if(3===c.count){const e=c.rank;var d=i.filter((a=>a.rank!=e));return{hand:o.THREE_OF_A_KIND,handRanks:[e],kickers:r(d,2)}}if(2===c.count&&2===g.count){const e=[c.rank,g.rank];var T=i.filter((a=>!e.includes(a.rank)));return{hand:o.TWO_PAIR,handRanks:e,kickers:r(T,1)}}if(2===c.count){const e=c.rank;var m=i.filter((a=>a.rank!=e));return{hand:o.PAIR,handRanks:[e],kickers:r(m,3)}}return{hand:o.HIGH_CARD,handRanks:[],kickers:r(i,5)}}function r(e,a){return e.map((e=>e.rank)).slice(0,a)}let l=!1;const h=game.big_blind/100,c="all",g={AA:[c,c],72:[c,c],KK:[c,c],QQ:[c,c],JJ:[c,c],TT:[c,c],99:[10,3],88:[10,3],AK:[c,c],AQ:[30,3],AJ:[30,3],A5:[3,1],AT:[8,3],A9:[1,1],A8:[1,1],KQ:[8,3],KJ:[8,3],KT:[3,3],K9:[1,1],QJ:[3,1],QT:[3,1],Q9:[1,1],Q8:[1,1],JT:[3,1],J9:[1,1],J8:[1,1],J7:[1,1],T9:[1,1],77:[3,1],66:[3,1],55:[3,1],44:[3,1],33:[3,1],22:[3,1]},u={AK:[c,c],AQ:[c,c],AJ:[30,5],AT:[10,5],A9:[10,3],A8:[8,3],A7:[6,1],A6:[6,1],A5:[8,3],A4:[5,1],A3:[5,1],A2:[5,1],KQ:[10,5],KJ:[10,5],KT:[8,3],K9:[6,3],K8:[1,3],QJ:[10,5],QT:[8,1],Q9:[3,1],Q8:[3,1],JT:[10,3],J9:[3,1],J8:[3,1],J7:[3,1],T9:[6,3],T8:[1,1],T7:[1,1],98:[5,1],97:[1,1],87:[5,1],86:[1,1],76:[1,1],75:[1,1],65:[1,1],64:[1,1],54:[1,1],43:[1,1],32:[1,1]};function d(){0===game.action_widget.to_call?T():game.action_widget.execute_fold()}function T(){game.action_widget.execute_check_call()}function m(e,a){const o=game.action_widget.stack_size+game.action_widget.bet_in_front;!function(e,a){const o=game.action_widget.bet_in_front,s=o+game.action_widget.to_call/100,n=o+game.action_widget.stack_size,t=game.action_widget.threshold_values.length?game.action_widget.threshold_values[0]:void 0;if(console.info(`Raise to limit: ${a}. Min bet: ${t}. Call to limit: ${e}. Bet size if call: ${s}.`),(game.action_widget.bet_button||game.action_widget.raise_button)&&t<=a)return console.log(a===n?"Going all in.":`Raising to ${a}.`),game.action_widget.update_slider_by_value(a),game.action_widget.sizing_input.value=a,void game.action_widget.execute_bet_raise();game.action_widget.all_in&&n<=a?(console.log("Can't/won't raise; going all in instead."),game.action_widget.all_in.execute()):game.action_widget.call_button&&s<=e?(console.log("Can't/won't raise; calling instead."),T()):(console.log("Checking/folding."),d())}(e===c?o:e*h,a===c?o:a*h)}function p(e){return _(e)||t(e,4)}function _(e){const a={};return e.forEach((e=>{const o=a[e.suit]||0;a[e.suit]=o+1})),Object.values(a).some((e=>4===e))}setInterval((async function(){if(!game.action_widget||!game.players[game.client_perspective].cards.card_str)return;await new Promise((e=>setTimeout(e,1e3)));const e=game.players[game.client_perspective].cards.card_str,s=game.board.card_str,n=s?` and the board shows ${s}.`:".";console.log(`My hole cards are ${e}${n}`),function(e,s){if("NL Texas Holdem"!==game.ruleset_name)return console.log(`Folding/checking because we aren't playing 'NL Texas Holdem'. The game is ${game.ruleset_name}.`),void d();try{!function(){game.game_options_widget.allow_easy_reveal&&!game.game_options_widget.easy_reveal.is_checked()&&game.game_options_widget.easy_reveal.clicked();game.game_options_widget.bomb_pot_value&&!game.game_options_widget.bomb_pot.is_checked()&&game.game_options_widget.bomb_pot.clicked()}()}catch(e){}""===s?function(e){const[o,s]=a(e),n=o.rank+s.rank;if(o.suit===s.suit){const e=u[n];if(e){console.log("Preflop cards are suited, and match one of the suited starting hands");const[a,o]=e;return void m(a,o)}}const t=g[n];if(!t)return Math.random()>.95?(console.log("Even though this isn't a hand we usually play, randomly limping in if it's cheap."),void m(3,1)):(console.log("Checking or folding."),void d());const[i,r]=t;m(i,r)}(e):function(e,s,n,r){var l=a(e),h=a(s);const g=i(l,h).hand,u=function(e,a){const o=i(e,a).hand,s=i([],a).hand;if(o===s)return[];const[n,t]=e.map((e=>i([e],a).hand));return n===o&&t===o?e[0].rankNum>e[1].rankNum?[e[0]]:[e[1]]:o===n?[e[0]]:o===t?[e[1]]:e}(l,h),T=[];g===o.STRAIGHT_FLUSH&&u.length>0&&T.push({message:"Straight flush!",callTo:c,raiseTo:4*h.length});g===o.FOUR_OF_A_KIND&&u.length>0&&T.push({message:"Four of a kind",callTo:c,raiseTo:4*h.length});g===o.FULL_HOUSE&&u.length>0&&(2===u?i([],h).hand===o.THREE_OF_A_KIND?h.every((e=>e.ranknum<l[0].ranknum))?T.push({message:"Three of a kind on the board and we have a pocket overpair",callTo:c,raiseTo:4*h.length}):T.push({message:"Three of a kind on the board and we have a pocket pair (not overpair)",callTo:10,raiseTo:3}):T.push({message:"Full house using at least both hole cards",callTo:c,raiseTo:4*h.length}):i([],h).hand===o.THREE_OF_A_KIND?T.push({message:"Full house using 1 hole card, but trips on the board",callTo:5,raiseTo:5}):T.push({message:"Full house using 1 hole card, no trips on the board",callTo:c,raiseTo:8}));if(g===o.FLUSH)if(2===u.length)T.push({message:"Flush using both our hole cards",callTo:c,raiseTo:7});else if(1===u.length)["A","K"].includes(u[0].rank)&&T.push({message:"Flush using 1 hole card (A or K)",callTo:c,raiseTo:4}),T.push({message:"Flush using 1 hole card (not A or K)",callTo:5,raiseTo:0});else{l.some((e=>["A","K"].includes(e.rank)&&e.suit===h[0].suit))?T.push({message:"Flush using 1 hole card (A or K)",callTo:c,raiseTo:4}):Math.random()>.9?T.push({message:"Flush on the board, but randomly bluffing 10% of the time",callTo:0,raiseTo:c}):T.push({message:"Flush on the board",callTo:0,raiseTo:0})}g===o.STRAIGHT&&(2===u.length?_(h)?T.push({message:"Straight using both hole cards, but 4 to flush on the board",callTo:5,raiseTo:5}):T.push({message:"Straight using both hole cards, wahoo!",callTo:c,raiseTo:7}):1===u.length?_(h)?T.push({message:"Straight using 1 hole card, but 4 to flush on the board",callTo:3,raiseTo:3}):T.push({message:"Straight using only 1 hole card",callTo:20,raiseTo:3}):(highestBoardCardRankNum=Math.max(...h.map((e=>e.rankNum))),l.some((e=>e.rankNum===highestBoardCardRankNum+1))?_(h)?T.push({message:"We beat the straight on the board, but there are 4 to a flush",callTo:0,raiseTo:0}):T.push({message:"Straight on the board, but we have a better straight",callTo:c,raiseTo:5}):T.push({message:"Straight on the board",callTo:0,raiseTo:0})));g==o.THREE_OF_A_KIND&&u.length>=1&&(p(h)?T.push({message:"Trips using at least 1 hole card, but 4 to flush/straight on the board",callTo:3,raiseTo:3}):2===u?T.push({message:"Pocket pair that hit trips or better",callTo:c,raiseTo:3*h.length}):T.push({message:"Trips using 1 hole card",callTo:25,raiseTo:3*h.length}));g==o.TWO_PAIR&&2==u.length&&(p(h)?T.push({message:"Two pair using both hole cards but 4 to flush/straight on the board",callTo:3,raiseTo:3}):l[0].rank===l[1].rank?h.every((e=>e.ranknum<l[0].ranknum))?T.push({message:"Pair on the board and pocket pair overpair",callTo:15,raiseTo:3}):T.push({message:"Pair on the board and pocket pair (not overpair)",callTo:5,raiseTo:1}):T.push({message:"Two pair using both hole cards",callTo:25,raiseTo:2*h.length}));[AHNDS.PAIR,o.TWO_PAIR].includes(g)&&1==u.length&&(p(h)?T.push({message:"Pair, but 4 to flush/straight on the board",callTo:3,raiseTo:3}):(boardCardRankNumDescending=h.map((e=>e.ranknum)).sort(((e,a)=>a-e)),u[0].ranknum===boardCardRankNumDescending[0]?3===h.length?2===n?T.push({message:"Top pair (only 1 other player in hand)",callTo:20,raiseTo:5}):T.push({message:"Top pair",callTo:10,raiseTo:3}):4===h.length?2===n?T.push({message:"Top pair (only 1 other player in hand)",callTo:20,raiseTo:10}):T.push({message:"Top pair",callTo:10,raiseTo:0}):2===n?T.push({message:"Top pair (only 1 other player in hand)",callTo:30,raiseTo:10}):T.push({message:"Top pair",callTo:10,raiseTo:0}):u[0].ranknum===boardCardRankNumDescending[1]&&(3===h.length?T.push({message:"Second pair",callTo:5,raiseTo:2}):T.push({message:"Second pair",callTo:5,raiseTo:0})),T.push({message:"low pair",callTo:3,raiseTo:0})));g===o.PAIR&&2===u&&(p(h)?T.push({message:"Pocket pair, but 4 to flush/straight on the board",callTo:3,raiseTo:3}):h.every((e=>e.ranknum<l[0].ranknum))?T.push({message:"Pocket pair overpair",callTo:c,raiseTo:5}):l[0].ranknum>9&&2==n&&T.push({message:"Pocket pair isn't top pair but it's high, and only 1 other player",callTo:10,raiseTo:5}));(function(e,a){const o={};return e.concat(a).forEach((e=>{const a=o[e.suit]||0;o[e.suit]=a+1})),Object.entries(o).some((([a,o])=>4===o&&e.every((e=>e.suit===a))))})(l,h)&&(3===h.length&&2===n&&Math.random>.5?T.push({message:"flush draw using both hole cards (3 cards on board), only 1 other player in hand, randomly going all in half the time",callTo:10,raiseTo:c}):5!==h.length&&T.push({message:"flush draw using both hole cards",callTo:10,raiseTo:0}));t(l.concat(h),4)&&!t(h,4)&&(3===h.length&&2===n?Math.random>.7?T.push({message:"straight draw, randomly going all in 30% of the time",callTo:12,raiseTo:c}):T.push({message:"open ended straight draw using at least 1 hole card",callTo:12,raiseTo:12}):5!==h.length&&T.push({message:"open ended straight draw using at least 1 hole card",callTo:10,raiseTo:10}));if(0===T.length&&2===n)return Math.random()>.97&&T.push({message:"Random bluff 3% of the time against 1 other player",callTo:0,raiseTo:c}),console.log("Nothing interesting going on with our hand. Check/folding"),void d();highestCallTo=0,highestRaiseTo=0,console.log("Considering betting based on these things:"),T.forEach((e=>{console.log("callTo: "+e.callTo+", raiseTo: "+e.raiseTo+", "+e.message),highestCallTo===c||e.callTo===c?highestCallTo=c:highestCallTo=Math.max(highestCallTo,e.callTo),highestRaiseTo===c||e.RaiseTo===c?highestRaiseTo=c:highestRaiseTo=Math.max(highestRaiseTo,e.raiseTo)})),console.log("Will call to: "+highestCallTo+" or raise to: "+highestRaiseTo),m(highestCallTo,highestRaiseTo)}(e,s,game.n_players_in_hand)}(e,s)}),2500),socket.on("is in showdown",(function(){const e=game.client_perspective;game.n_players_in_hand>1&&game.players[e].is_sitting_in&&!game.players[e].is_folded&&(console.log("SHOWDOWN WITH ME IN IT"),console.log("# players in showdown:",game.n_players_in_hand),l=Object.entries(game.players).some((([a,o])=>o.is_sitting_in&&!o.is_folded&&0===o.chips&&a!==e+"")),console.log("tauntOpportunity",l))})),socket.on("distributing pot",(function(e){const a=game.client_perspective;l&&e.winners[a]&&1===Object.keys(e.winners).length&&(console.log("Taunting because I knocked someone out!"),socket.emit("taunt",{taunt:16,id:game.table_id,group_id:game.group_id})),l=!1}))})();
//# sourceMappingURL=index.js.map
